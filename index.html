<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Indonesia</title>
  <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="ramda.js" type="text/javascript" charset="utf-8"></script>
  <script>

    var s = (function(){
      var svgns = "http://www.w3.org/2000/svg";

      function tag(name, ns){
        ns || (ns = {});
        return function(attrs){
          var el = document.createElementNS(svgns, name);
          $.each(attrs, function(key, value){
            ns[key] ? el.setAttributeNS(ns[key], key, value) : el.setAttribute(key, value);
          });
          return $(el);
        }
      }
      return {
        rect:   tag('rect'),
        circle: tag('circle'),
        use:    tag('use', {href: "http://www.w3.org/1999/xlink"})
      }
    })(), use = s.use;

    $(function(){
      $("#indonesia").load(function(){
        var board   = $(this.contentDocument);
        var regions = board.find("#layer7");
        var oceans  = board.find("#layer2").remove();
        var arrows  = board.find("#layer5").remove();
        var spice   = board.find("#spice");
        var respice = use({href: '#spice', x: 0, y: 50}).appendTo(regions);
        $.extend(s, {board: board, regions: regions, spice: spice, respice: respice});
      });
    });

  </script>
</head>
<body>
  <object id="indonesia" type="image/svg+xml" data="map/indonesia.svg">No SVG support</object>
</body>
</html>
